// api/patient-data.js
// يجب أن تكون هذه البيانات هي المصفوفات التي استخرجتها من ملف index.html
// وتأكد من أن أسماء المتغيرات (IDS, NAMES, MOBILES) مطابقة لملفك الأصلي

const IDS = ['1009656347', '1013252117', '1027525425', '1062869373', '1072862756', '1082063593', '1088330574', '1092176740', '1093222824', '1093714697', '1095965560', '1110442611', '1111229645', '1009351923', '1011159686', '1033831684', '1012778906', '1008791202', '1002717955', '1027142155', '1149077644', '1027574258', '1014456964', '1138338411', '1095283691', '1177829387', '1029355342', '1014456964', '1108575299', '1015351602', '1038995260', '1008592063', '1020406615', '1152052070', '1022636698', '1072192121', '1004405583', '2354498608', '1022099855', '1071528762', '1094817259', '1119099784', '1049977604', '1015903758', '1010679965', '2493237008', '1069066593', '1069427860', '1108595271', '1095122899', '1114407867', '1033973882'

];
const NAMES = ['نسرين عيضه النمري', 'لوي عبدالله الغامدي', 'علي يحي المالكي', 'عواطف حميد المالكي', 'عبدالاله عتيبي المالكي', 'سهام سعود الثقفي', 'Tahani Ayed alzaidi', 'رهف حمود الشريف', 'اشواق صالح الحارثي', 'عبير - المالكي', 'مدى محمد الجميعي', 'وجود خالد العباسي', 'شذا مشرف الغامدي', 'منور بطح الثبيتي', 'عايض عبدالله الحارثي', 'احمد خلف الشمري', 'مصلح حامد الحارثي', 'امل عبدالله الهباد', 'سالم معيوض الثبيتي', 'محمد مفلح الشهراني', 'ندى عبدالعزيز الدريس', 'خلف ناصر الشريف', 'حماد محمد النمري', 'محمد عواضه العتيبي', 'عبد العزيز عبد الحفيظ الخولي', 'الين علي حمدي', 'فهد عبد الله القرشي', 'حماد محمد النمري', 'اثير احمد الزهراني', 'قاسم عبدالله عسيري', 'خالد عبدالله قطان', 'حامد علي المالكي', 'عبدالله عثمان العوفي', 'نايف عادل العتيبي', 'Omar Sharaf Khouj', 'فيصل محمد الثبيتي', 'عبد الرحمن هادي النفيعي', 'ايشا حاجي اللاهداد', 'سعد احمد الثقفي', 'عوض عمر الحارثي', 'جابر سبعان الاسمري', 'محمد سلمان', 'نوير خليفه الحارثي', 'نوره معيوض الحارثي', 'فالح فواز السبيعي', 'مها محمد صابر', 'محمد - القحطاني', 'فاطمة حسن الغموي', 'منار يوسف العبيسيس', 'تركي فهد الحمياني', 'HANAN SAEED ALMALKI', 'بدر ضيدان النفيعي'];
const MOBILES = ['557799161', '590073333', '503797975', '504717157', '562240008', '538383262', '554260823', '568408714', '509093414', '555574943', '533375420', '569784584', '500698081', '552365874', '503717254', '559810008', '552061284', '503717800', '504721529', '505629832', '504708810', '557749963', '555714500', '552609003', '599055081', '551427942', '555511787', '555714500', '537091654', '530404719', '501331944', '562449056', '505803310', '554418483', '547411411', '556000884', '545262054', '531150555', '506703520', '582369918', '508937224', '536709843', '531370120', '556977057', '507492467', '556126494', '530360881', '531902132', '505206874', '560550840', '532104546', '568473351'
];

export default (request, response) => {
    // 1. استلام رقم الهوية
    const patientId = request.query.id;

    if (!patientId) {
        return response.status(400).json({ status: 'error', message: 'رقم الهوية مفقود.' });
    }

    // 2. البحث عن رقم الهوية في مصفوفة IDS
    const index = IDS.indexOf(patientId);

    // 3. إرجاع النتيجة
    if (index !== -1) {
        const patientData = {
            name: NAMES[index],
            id: IDS[index],
            mobile: MOBILES[index]
        };
        // تم الإيجاد، وإرجاع بيانات المريض فقط
        response.status(200).json({ status: 'success', data: patientData });
    } else {
        // لم يتم الإيجاد
        response.status(200).json({ status: 'not_found', message: 'رقم الهوية غير موجود.' });
    }
};
